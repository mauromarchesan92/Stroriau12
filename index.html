<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Verifica di storia</title>
 <script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script type="text/javascript">
  (function () {
    emailjs.init("orLnix6b43o8KC9NW"); // il tuo user ID
  })();
</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    .correct {
      color: green;
    }
    .incorrect {
      color: red;
    }
  </style>
</head>
<body>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
  }
  .question {
    margin-bottom: 15px;
  }
  label {
    display: block;
    margin: 4px 0;
  }
</style>

  <h1>Verifica di storia</h1>

  <!-- Dati Studente -->
  <label>Nome e Cognome: <input type="text" id="studentName" required></label><br>
  <label>Classe: <input type="text" id="studentClass" required></label><br>
  <label>Data: <input type="date" id="date" required></label><br><br>


 <!-- Domande a scelta multipla -->
 <div class="question">
    <p>1. Quando scoppia la Guerra di Corea?</p>
    <label><input type="radio" name="q1" data-correct="false"> 1945</label>
    <label><input type="radio" name="q1" data-correct="true"> 1950</label>
    <label><input type="radio" name="q1" data-correct="false"> 1953</label>
  </div>
  <div class="question">
    <p>2. In quale anno l’URSS invade l’Ungheria?</p>
    <label><input type="radio" name="q2" data-correct="false"> 1953</label>
    <label><input type="radio" name="q2" data-correct="true"> 1956</label>
    <label><input type="radio" name="q2" data-correct="false"> 1960</label>
  </div>
  <div class="question">
    <p>3. In quale anno viene fondata l’ONU?</p>
    <label><input type="radio" name="q3" data-correct="true"> 1945</label>
    <label><input type="radio" name="q3" data-correct="false"> 1948</label>
    <label><input type="radio" name="q3" data-correct="false"> 1951</label>
  </div>
  <div class="question">
    <p>4. Quando si conclude la Guerra del Vietnam?</p>
    <label><input type="radio" name="q4" data-correct="false"> 1973</label>
    <label><input type="radio" name="q4" data-correct="true"> 1975</label>
    <label><input type="radio" name="q4" data-correct="false"> 1978</label>
  </div>
  <div class="question">
    <p>5. In quale anno viene costruito il Muro di Berlino?</p>
    <label><input type="radio" name="q5" data-correct="false"> 1958</label>
    <label><input type="radio" name="q5" data-correct="true"> 1961</label>
    <label><input type="radio" name="q5" data-correct="false"> 1965</label>
  </div>
  <div class="question">
    <p>6. Il Piano Marshall fu finanziato da:</p>
    <label><input type="radio" name="q6" data-correct="false"> Regno Unito</label>
    <label><input type="radio" name="q6" data-correct="true"> Stati Uniti</label>
    <label><input type="radio" name="q6" data-correct="false"> Unione Sovietica</label>
  </div>
  <div class="question">
    <p>7. La Guerra del Vietnam si concluse con:</p>
    <label><input type="radio" name="q7" data-correct="false"> Vittoria degli Stati Uniti</label>
    <label><input type="radio" name="q7" data-correct="false"> Vittoria del Vietnam del Sud</label>
    <label><input type="radio" name="q7" data-correct="true"> Vittoria del Vietnam del Nord</label>
  </div>
  <div class="question">
    <p>8. La Cina maoista era caratterizzata da:</p>
    <label><input type="radio" name="q8" data-correct="true"> Comunismo e maoismo</label>
    <label><input type="radio" name="q8" data-correct="false"> Consumismo e autoritarismo</label>
    <label><input type="radio" name="q8" data-correct="false"> Pacifismo e internazionalismo</label>
  </div>
  <div class="question">
    <p>9. Uno degli obiettivi principali dell’ONU era:</p>
    <label><input type="radio" name="q9" data-correct="false"> Contrastare la diffusione del comunismo</label>
    <label><input type="radio" name="q9" data-correct="false"> Favorire la ripresa economica</label>
    <label><input type="radio" name="q9" data-correct="true"> Tutelare la pace e i diritti umani</label>
  </div>
  <div class="question">
    <p>10. Nel 1949 il territorio della Germania fu:</p>
    <label><input type="radio" name="q10" data-correct="true"> Diviso in due Stati</label>
    <label><input type="radio" name="q10" data-correct="false"> Posto sotto mandato ONU</label>
    <label><input type="radio" name="q10" data-correct="false"> Occupato interamente dall’URSS</label>
  </div>
  <div class="question">
    <p>11. Nel 1959 a Cuba prese il potere ______ che si alleò con ____.</p>
    <label><input type="radio" name="q11" data-correct="true"> Fidel Castro; i Sovietici</label>
    <label><input type="radio" name="q11" data-correct="false"> Fidel Castro; gli Americani</label>
    <label><input type="radio" name="q11" data-correct="false"> Francisco Franco; i Sovietici</label>
  </div>
  <div class="question">
    <p>12. Dopo il 1944, quale valuta divenne riferimento internazionale?</p>
    <label><input type="radio" name="q12" data-correct="false"> La sterlina britannica</label>
    <label><input type="radio" name="q12" data-correct="true"> Il dollaro statunitense</label>
    <label><input type="radio" name="q12" data-correct="false"> Il rublo sovietico</label>
  </div>
  <div class="question">
    <p>13. Chi guidò l’URSS dopo la morte di Stalin?</p>
    <label><input type="radio" name="q13" data-correct="false"> Lenin</label>
    <label><input type="radio" name="q13" data-correct="true"> Nikita Khrushchev</label>
    <label><input type="radio" name="q13" data-correct="false"> Leonid Breznev</label>
  </div>
  <div class="question">
    <p>14. La NATO è un’alleanza militare di paesi:</p>
    <label><input type="radio" name="q14" data-correct="true"> Paesi occidentali</label>
    <label><input type="radio" name="q14" data-correct="false"> Paesi orientali</label>
    <label><input type="radio" name="q14" data-correct="false"> Paesi non allineati</label>
  </div>
  <div class="question">
    <p>15. Chi fu il leader del movimento per i diritti civili degli Afroamericani negli anni Sessanta?</p>
    <label><input type="radio" name="q15" data-correct="true"> Martin Luther King</label>
    <label><input type="radio" name="q15" data-correct="false"> Malcolm X</label>
    <label><input type="radio" name="q15" data-correct="false"> Nelson Mandela</label>
  </div>
  <div class="question">
    <p>16. Chi fu l’artefice del “Grande balzo in avanti” in Cina?</p>
    <label><input type="radio" name="q16" data-correct="true"> Mao Zedong</label>
    <label><input type="radio" name="q16" data-correct="false"> Deng Xiaoping</label>
    <label><input type="radio" name="q16" data-correct="false"> Zhou Enlai</label>
  </div>
  <div class="question">
    <p>17. La Comunità Economica Europea nacque come alleanza di paesi:</p>
    <label><input type="radio" name="q17" data-correct="true"> Europei</label>
    <label><input type="radio" name="q17" data-correct="false"> Mondiali</label>
    <label><input type="radio" name="q17" data-correct="false"> Asiatici</label>
  </div>
  <div class="question">
    <p>18. In che anno si tenne la Conferenza di Yalta?</p>
    <label><input type="radio" name="q18" data-correct="false"> 1943</label>
    <label><input type="radio" name="q18" data-correct="true"> 1945</label>
    <label><input type="radio" name="q18" data-correct="false"> 1947</label>
  </div>
  <div class="question">
    <p>19. In che anno ebbe luogo la Conferenza di Potsdam?</p>
    <label><input type="radio" name="q19" data-correct="true"> 1945</label>
    <label><input type="radio" name="q19" data-correct="false"> 1946</label>
    <label><input type="radio" name="q19" data-correct="false"> 1948</label>
  </div>
  <div class="question">
    <p>20. Nel referendum del 1946 l’Italia scelse come forma di governo:</p>
    <label><input type="radio" name="q20" data-correct="false"> Monarchia</label>
    <label><input type="radio" name="q20" data-correct="true"> Repubblica</label>
    <label><input type="radio" name="q20" data-correct="false"> Impero</label>
  </div>
  <div class="question">
    <p>21. Chi fu il presidente degli USA durante l’escalation della guerra in Vietnam?</p>
    <label><input type="radio" name="q21" data-correct="false"> John F. Kennedy</label>
    <label><input type="radio" name="q21" data-correct="true"> Lyndon B. Johnson</label>
    <label><input type="radio" name="q21" data-correct="false"> Richard Nixon</label>
  </div>
  <div class="question">
    <p>22. Come si concluse la Guerra di Corea?</p>
    <label><input type="radio" name="q22" data-correct="false"> Vittoria degli USA</label>
    <label><input type="radio" name="q22" data-correct="true"> Armistizio</label>
    <label><input type="radio" name="q22" data-correct="false"> Vittoria della Cina</label>
  </div>
  <div class="question">
    <p>23. Il Patto di Varsavia riuniva paesi:</p>
    <label><input type="radio" name="q23" data-correct="false"> Nato (occidentali)</label>
    <label><input type="radio" name="q23" data-correct="true"> Oriental-sovietici</label>
    <label><input type="radio" name="q23" data-correct="false"> Non allineati</label>
  </div>
  <div class="question">
    <p>24. Negli anni Sessanta la crisi di Cuba del 1962 vide contrapposti _____ e _____.</p>
    <label><input type="radio" name="q24" data-correct="true"> URSS e USA</label>
    <label><input type="radio" name="q24" data-correct="false"> Cina e USA</label>
    <label><input type="radio" name="q24" data-correct="false"> URSS e Cina</label>
  </div>

  <button id="sendBtn">Invia via email</button>
  <button id="checkBtn" disabled>Correggi risposte</button>
  <button id="exportBtn" disabled>Esporta risposte (PDF)</button>

  <script>
    (function () {
      emailjs.init("orLnix6b43o8KC9NW");
    })();

    function getAllAnswers() {
      const questions = document.querySelectorAll('.question');
      let output = '';

      questions.forEach((q, index) => {
        const questionText = q.querySelector('p').innerText;
        const selected = q.querySelector('input[type="radio"]:checked');
        const answer = selected ? selected.parentElement.innerText.trim() : "Nessuna risposta";
        output += `${index + 1}. ${questionText}\nRisposta: ${answer}\n\n`;
      });

      return output;
    }

    document.getElementById("sendBtn").addEventListener("click", function () {
      const name = document.getElementById("studentName").value.trim();
      const studentClass = document.getElementById("studentClass").value.trim();
      const date = document.getElementById("date").value;
      const answers = getAllAnswers();

      if (!name || !studentClass || !date) {
        alert("Per favore, compila tutti i campi.");
        return;
      }

      this.disabled = true;

      emailjs.send("service_7kem7ei", "template_4uytzdn", {
        name: name,
        student_class: studentClass,
        date: date,
        answers: answers,
        to_email: "mauro.marchesan@icrilke.edu.it"
      }).then(() => {
        alert("Email inviata con successo!");
        document.getElementById("checkBtn").disabled = false;
        document.getElementById("exportBtn").disabled = false;
      }, (error) => {
        alert("Errore nell'invio dell'email: " + error.text);
        document.getElementById("sendBtn").disabled = false;
      });
    });

    document.getElementById("checkBtn").addEventListener("click", function () {
      const questions = document.querySelectorAll('.question');
      let score = 0;

      questions.forEach((q) => {
        const selected = q.querySelector('input[type="radio"]:checked');
        const correct = q.querySelector('input[data-correct="true"]');

        if (selected) {
          if (selected === correct) {
            selected.parentElement.classList.add('correct');
            score++;
          } else {
            selected.parentElement.classList.add('incorrect');
          }
        }
      });

      alert("Hai ottenuto " + score + " risposte corrette su " + questions.length);
    });

    document.getElementById("exportBtn").addEventListener("click", function () {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const name = document.getElementById("studentName").value.trim();
      const studentClass = document.getElementById("studentClass").value.trim();
      const date = document.getElementById("date").value;

      const questions = document.querySelectorAll('.question');
      let text = `Verifica di storia\n\nNome: ${name}\nClasse: ${studentClass}\nData: ${date}\n\n`;

      questions.forEach((q, index) => {
        const questionText = q.querySelector('p').innerText;
        const selected = q.querySelector('input[type="radio"]:checked');
        const answer = selected ? selected.parentElement.innerText.trim() : "Nessuna risposta";
        text += `${index + 1}. ${questionText}\nRisposta: ${answer}\n\n`;
      });

      doc.text(text, 10, 10);
      doc.save('verifica_storia.pdf');
    });
  </script>

</body>
</html>
<h1>👋 In bocca al lupo!<h1>
